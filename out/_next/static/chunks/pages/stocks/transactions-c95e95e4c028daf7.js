(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[240],{1039:function(e,r,t){!function(e,r,t){"use strict";var n=t&&"object"==typeof t&&"default"in t?t:{default:t};function s(e,r,t){"function"==typeof e?(s=r||[],i=t):(s=[],i=r);var s,i,u=n.default.useRef({hasResult:!1,result:i,error:null}),o=n.default.useReducer(function(e){return e+1},0);o[0];var a=o[1],c=n.default.useMemo(function(){var r="function"==typeof e?e():e;if(!r||"function"!=typeof r.subscribe){if(e===r)throw TypeError("Given argument to useObservable() was neither a valid observable nor a function.");throw TypeError("Observable factory given to useObservable() did not return a valid observable.")}if(!u.current.hasResult&&"undefined"!=typeof window){if("function"==typeof r.getValue)u.current.result=r.getValue(),u.current.hasResult=!0;else{var t=r.subscribe(function(e){u.current.result=e,u.current.hasResult=!0});"function"==typeof t?t():t.unsubscribe()}}return r},s);if(n.default.useDebugValue(u.current.result),n.default.useEffect(function(){var e=c.subscribe(function(e){var r=u.current;(null!==r.error||r.result!==e)&&(r.error=null,r.result=e,r.hasResult=!0,a())},function(e){var r=u.current;r.error!==e&&(r.error=e,a())});return"function"==typeof e?e:e.unsubscribe.bind(e)},s),u.current.error)throw u.current.error;return u.current.result}e.useLiveQuery=function(e,t,n){return s(function(){return r.liveQuery(e)},t||[],n)},e.useObservable=s,e.usePermissions=function(e,t,n){var i;if(!e)throw TypeError("Invalid arguments to usePermissions(): undefined or null");if(arguments.length>=3){if(!("transaction"in e))throw TypeError("Invalid arguments to usePermission(db, table, obj): 1st arg must be a Dexie instance");if("string"!=typeof t)throw TypeError("Invalid arguments to usePermission(db, table, obj): 2nd arg must be string");if(!n||"object"!=typeof n)throw TypeError("Invalid arguments to usePermission(db, table, obj): 3rd arg must be an object");i=e}else{if(e instanceof r.Dexie)throw TypeError("Invalid arguments to usePermission(db, table, obj): Missing table and obj arguments.");if("function"==typeof e.table&&"object"==typeof e.db)i=e.db,n=e,t=e.table();else throw TypeError("Invalid arguments to usePermissions(). Expected usePermissions(entity: DexieCloudEntity) or usePermissions(db: Dexie, table: string, obj: DexieCloudObject)")}if(!("cloud"in i))throw Error("usePermissions() is only for Dexie Cloud but there's no dexie-cloud-addon active in given db.");if(!("permissions"in i.cloud))throw Error("usePermissions() requires a newer version of dexie-cloud-addon. Please upgrade it.");return s(function(){return i.cloud.permissions(n,t)},[n.realmId,n.owner,t])},Object.defineProperty(e,"__esModule",{value:!0})}(r,t(9520),t(7294))},4791:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/stocks/transactions",function(){return t(3793)}])},6873:function(e,r,t){"use strict";t.d(r,{L6:function(){return o},Nt:function(){return u},op:function(){return i}});var n=t(9520);let s=new n.default("my-portfolio");s.version(1).stores({stocks:"ticker, name",accounts:"++id, name",transactions:"++id, type, ticker, accountId, date, description, shares, price, brokerage"});let i=s.table("stocks"),u=s.table("accounts"),o=s.table("transactions")},3793:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return l}});var n=t(5893),s=t(1664),i=t.n(s),u=t(1163),o=t(1039),a=t(6873);let c=e=>{let{ticker:r}=e,t=(0,o.useLiveQuery)(()=>a.L6.where("ticker").equals(r).toArray(),[r]);return(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{children:"Transactions"}),(0,n.jsx)("ul",{children:null==t?void 0:t.map(e=>(0,n.jsx)("li",{children:(0,n.jsxs)(i(),{href:{pathname:"/stocks/transaction/[id]",query:{id:e.id}},children:[new Date(e.date).toLocaleDateString(),",",e.description,",","buy"===e.type.toString()?"":" -",e.shares,",",e.price,",",e.brokerage]})},e.id))})]})};var l=function(){let{ticker:e}=(0,u.useRouter)().query,r=Array.isArray(e)?e[0]:null!=e?e:"",t=(0,o.useLiveQuery)(()=>a.op.where("ticker").equalsIgnoreCase(r).first(),[e]);return(0,n.jsxs)("div",{children:[(0,n.jsxs)("h1",{children:[r," - ",null==t?void 0:t.name]}),(0,n.jsx)(i(),{href:{pathname:"/transactions/create",query:{ticker:r}},children:"Create transaction"}),(0,n.jsx)(c,{ticker:r})]})}},1163:function(e,r,t){e.exports=t(6885)}},function(e){e.O(0,[774,520,664,888,179],function(){return e(e.s=4791)}),_N_E=e.O()}]);